# Advanced 01 - 로그 추적기



- 병목이 발생하는 부분
- 예외가 발생하는지 로그 기록

> 모니터링 툴을 도입하면 많은 부분이 해결된다. 학습목적으로 구현



## 요구 사항

- 모든 public 메서드 호출과 응답을 로그로 출력
- 애플리케이션 흐름을 변경하지 않는다.
- 메서드 호출 걸린 시간
- 정상 흐름과 예외 흐름 구분, 예외 발생 정보가 남아야 한다.
- 메서드 호출의 깊이를 표현
- HTTP 요청을 구분
  - HTTP 요청 단위로 특정 ID를 넘긴다.
  - 하나의 HTTP 요청이 시작해서 끝날 때 까지를 한 트랜잭션이라 할 때, 트랜잭션 ID를 기록한다.



---

# 로그 추적기 V1 - 프로토타입 개발

- HelloTrace 를 주입받아서 각 클래스마다 직접 로그를 찍는다. (try ~ catch)



# 로그 추적기 V2 - 파라미터로 동기화 개발

- 트랜잭션ID, level을 다음 로그에 넘겨준다.



단점

- 첫번째는 begin(), 두번째부터는 beginSync()를 호출해야 한다.
- traceId 를 동기화하기 위해 파라미터를 계속 전달해야 한다.
- 다른 곳에서 서비스를 사용할 때 애매하다.