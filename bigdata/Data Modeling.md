# Data Modeling

데이터 모델링은 실제 데이터를 물리적으로 데이터베이스화 하기 위해 이루어지는 과정 중 한 단계입니다.

개념 모델링 → 논리 모델링 → 물리 모델링 순으로 진행합니다.





**1) 개념 모델링(Conceptual Data Modeling)**

 조직, 사용자의 데이터 요구 사항을 찾고 분석합니다.

 **핵심 엔터티**와 그들 간 **관계를 발견**하고, **개체-관계 다이어그램(ERD, Entity-Relationship Diagram)을 생성**합니다. 개체-관계 다이어그램은 조직과 다양한 데이터베이스 사용자에게 어떠한 데이터가 중요한지 나타내기 위함입니다.

 1) 개념 데이터 모델은 사용자와 시스템 개발자의 데이터 요구 사항 발견을 지원합니다.

 2) 개념 데이터 모델은 현 시스템이 어떻게 변형되어야 하는가를 이해하는 데 유용합니다.





**(2) 논리 모델링(Logical Data Modeling)**

 개념 모델링 과정의 핵심 엔터티를 이용하여 구현된 **기초 모델링을 "상세화"** 하는 과정으로 **데이터의 입력, 출력 과정들을 고려한 완성된 형태의 모델** 구현 과정을 의미합니다.

**ERD 로 표현된 개념적 구조를 데이터베이스에 저장할 형태로 표현한 논리적 구조입니다.**



 데이터 모델링 프로세스의 입력(input)으로, 비즈니스 정보의 논리적 구조와 규칙을 명확하게 표현하는 기법, 과정입니다. 즉, 물리적 스키마를 설계 하기 전 '데이터 모델' 상태를 일컫는 말입니다. 누가, 어떻게 데이터에 접근하는 지 기법을 담고 있습니다.

- **데이터 정규화**

  데이터 모델의 일관성을 확보하고, 중복을 제거하여 각 속성들이 적절한 엔터티에 배치되도록 하며 신뢰성 있는 데이터 구조를 얻는 데 목적이 있습니다.

- **논리데이터 모델의 상세화**

  식별자 확정, 정규화, M:M 관계 해소, 참조 무결성 규칙 정의, 이력 관리 전략



**3) 물리 모델링(Physical Data Modeling)**

 

 논리 데이터 모델이 데이터 저장소로서 컴퓨터 하드웨어에 표현되는 방법(물리적 스키마)을 결정합니다. **테이블, 칼럼 등의 물리적 저장 구조**와, **사용될 저장 장치**, **자료 추출을 위한 접근 방법 등을 결정**해야 합니다.

------

## 다차원 모델링

- **OLTP (Online Transaction Processing)** : 온라인 트랜잭션 처리

   현재 업무의 효율적인 처리를 위함

   관계형 데이터베이스(RDB) 사용

- **OLAP (Online Analytical Processing)** : 온라인 분석 처리

   의사결정에 도움되는 데이터 분석을 위함

   다차원 DB (MDB or MDDB) 사용

다차원 모델링의 종류로 별, 눈꽃송이, 복합(Composite) 스키마 등이 있습니다.





## 스타스키마(Star Schema)

[![img](https://camo.githubusercontent.com/4e4a66e926cc0eebe081bd48498a5d1afd2cf274/687474703a2f2f7777772e73716c65722e636f6d2f66696c65732f6174746163682f696d616765732f3336383137342f3430342f3439392f66623564346166623662383237396235643833333632613638613339383262612e706e67)](https://camo.githubusercontent.com/4e4a66e926cc0eebe081bd48498a5d1afd2cf274/687474703a2f2f7777772e73716c65722e636f6d2f66696c65732f6174746163682f696d616765732f3336383137342f3430342f3439392f66623564346166623662383237396235643833333632613638613339383262612e706e67)

이미지 출처: http://www.sqler.com/files/attach/images/368174/404/499/fb5d4afb6b8279b5d83362a68a3982ba.png



스타 스키마는 조인 스키마(join schema)라고도 불립니다. 데이터 웨어하우스 스키마 중 가장 단순한 종류입니다. 한 개의 Fact table과 Prime key 및 각 Dimension과 추가적인 Fact로 이루어져있습니다. 

스타 스키마를 이용하면 전통적 관계형 데이터베이스에서 다차원 데이터베이스(MDDB) 기능을 할 수 있습니다.

스타 스키마의 장점은 이를 이해하기가 쉽다는 것입니다. Fact table은 보통 제 3 정규형인데 반 해, Dimensional table은 보통 역정규화(denormalized)된 제 2 정규형입니다. 차원 테이블을 정규화 한다면, 차원 테이블은 눈꽃송이(snowflake) 모양으로 보일 것입니다. 또한 제 3 정규형의 문제점들이 생기게 됩니다. 즉, 복잡한 쿼리를 날려야 하고, 비즈니스 유저들은 데이터의 의미를 잘 이해하지 못할 것입니다. 

비록 최신 DBMS 기술과 하드웨어 지원을 받아 쿼리 성능을 높일 수 있다해도, 높은 차수로 정규화된 테이블은 리포팅(reporting)을 어렵게 하고, 애플리케이션을 복잡하게 할 뿐입니다.









- **하나의 사실(Fact) 테이블과 다수의 차원(Dimension) 테이블로 구성**됩니다. 실제 사용자가 쉽게 이해할 수 있도록 단순하게 모델링 되며, 원하는 보고서를 만들기 위해 필요한 조인의 횟수를 줄임으로써 사용자 질의에 빠른 속도로 응답할 수 있는 장점이 있습니다.
- 각 차원은 기본 키 - 왜래 키 관계에 따라 Fact 테이블에 직접 연결된 단일 Dimension 테이블을 기반으로 합니다.
- Star 스키마는 대용량에서 많이 사용됩니다. 분석 관점이 명확하고 데이터 건수가 많은 경우는 유리하지만, 다양한 관점으로 분석 요구시 차원테이블이 추가되고 Fact 테이블에 대해 변경이 일어날 경우 처음부터 다시 쌓거나 다른 Fact 텡블을 만들어야 하는 불편함이 있습니다. 이럴 때는 Snowflake 스키마가 더 적합할 수 있습니다.

## 스노우 플레이크 스키마(Snowflake Schema)

[![img](https://camo.githubusercontent.com/f0cfb1cc5bb0761e3e666da9b4dc46b12f0d7c0f/687474703a2f2f7777772e73716c65722e636f6d2f66696c65732f6174746163682f696d616765732f3336383137342f3430342f3439392f33303565346664323533376261303631623432376231636133313331663832352e706e67)](https://camo.githubusercontent.com/f0cfb1cc5bb0761e3e666da9b4dc46b12f0d7c0f/687474703a2f2f7777772e73716c65722e636f6d2f66696c65732f6174746163682f696d616765732f3336383137342f3430342f3439392f33303565346664323533376261303631623432376231636133313331663832352e706e67)

이미지 출처: http://www.sqler.com/files/attach/images/368174/404/499/305e4fd2537ba061b427b1ca3131f825.png



눈꽃송이 스키마(snowflake schema)는 스타 스키마 모델의 변형으로서 몇몇 차원 테이블들이 정규화되어, 데이터를 추가적 테이블로 분할합니다. 눈송이 모델의 차원 테이블은 중복을 줄이기 위한 정규형으로 유지가 됩니다. 이는 테이블의 유지가 용이하게 하고 저장공간을 절약하게 합니다. 

그러나 이러한 저장공간 절약은 사실테이블 규모에 비해 사소할 수 있고, 눈송이 구조는 질의를 수행하기 위해 더 많은 조인을 필요로 하기 때문에 검색의 효과를 감소시킬 수 있습니다. 결과적으로 시스템 성능에 악영향을 끼칠 수 있습니다. 따라서 눈송이 스키마가 중복을 줄일 수 있을지라도 데이터웨어하우스 설계에 있어서 스타스키마 만큼 널리 쓰이지 않습니다.







- 스노우플레이크 스키마는 확장에 용이합니다.
- 많은 데이터를 보유할 수 있으므로 성능과 집계에 영향을 미칩니다.
- 데이터 중복은 피할수있으나, 이해하기 어려운 단점이 있습니다.

------

**Reference**

http://www.dbguide.net/db.db?cmd=view&boardUid=12733&boardConfigUid=9&categoryUid=216&boardIdx=31&boardStep=1

https://dbrang.tistory.com/1381

https://unabated.tistory.com/entry/OLTP-OLAP

[https://unabated.tistory.com/entry/%EB%8B%A4%EC%B0%A8%EC%9B%90-%EB%AA%A8%EB%8D%B8%EB%A7%8112](https://unabated.tistory.com/entry/다차원-모델링12)

[https://ko.wikipedia.org/wiki/%EC%8A%A4%ED%83%80_%EC%8A%A4%ED%82%A4%EB%A7%88](https://ko.wikipedia.org/wiki/스타_스키마)

[https://ko.wikipedia.org/wiki/%EB%88%88%EC%86%A1%EC%9D%B4_%EC%8A%A4%ED%82%A4%EB%A7%88](https://ko.wikipedia.org/wiki/눈송이_스키마)