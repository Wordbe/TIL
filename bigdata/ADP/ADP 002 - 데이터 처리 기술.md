# ADP 002 - 데이터 처리 기술



# 01 분산 데이터 저장 기술

네트워크로 연결된 여러 머신 스토리지를 관리하는 파일 시스템

> 비대칭형 클러스터 FS(File System) : 한 컴퓨터는 긴급 대기 모드 상태를 유지하여 비상사태시 활성화 된다.



## 1. 분산 파일 시스템(DFS)

### 1) 구글 파일 시스템(GFS)

구글의 대규모 클러스터 서비스 플랫폼의 기반이 된다.

* Master, Chunk, Client로 이루어져 있다.
* **GFS의 마스터**는 메타데이터를 메모리상에서 관리, heartbeat 또는 chunk 서버에 저장된 chunk 상태를 체크하여, chunk 재복사, 재분산 등 회복 동작을 수행한다.
* **Chunk 서버**는 로컬 디스크에 chunk를 저장, 관리하고 클라이언트로부터 chunk 입출력 요청을 관리한다.
* **GFS의 클라이언트**는 POSIX(Portable Operation System Interface)를 지원하지 않고, 파일 시스템과 유사한 자체 인터페이스를 지원한다.
* 블록크기(chunk)는 64MB가 기본값이다. 여러 블록은 여러 서버에 나눠서 저장된다.





### 2) 하둡 분산 파일 시스템 (HDFS)

GFS 아키텍처, 사상을 그대로 구현한 클로킹 프로젝트. 하둡은 HDFS와 MapReduce 등을 포함한다.

#### 네임 노드(NameNode) 역할

* 1) 메타데이터 관리
* 2) 데이터노드 모니터링 : 3초마다 hearbeat 메시지 전송, 데이터노드의 실행 상태와 용량을 모니터링한다.
* 3) 블록 관리
* 4) 클라이언트 요청 접수

#### 데이터노드(DataNode)

* 데이터 저장
* 클라이언트로부터 데이터 입출력 요청 처리

HDFS에서 파일 한 번 쓰이면 변경되지 않는다.



### 3) 러스터(Lustre)

클러스터 파일 시스템에서 개발한 객체 기반 클러스터 파일 시스템이다.

Client FS, Metadata 서버, 객체 저장 서브로 구성된다.

#### 특징

* 리눅스에서 사용 가능, POSIX 호환되는 유닉스 파일 시스템 인터페이스(유닉스 시멘틱) 제공
* 파일 메타데이터에 대해 라이트 백 캐시(Write back cache) 지원



---

## 2. 데이터베이스 클러스터

> 데이터 통합시, **성능 향상**, **가용성**높이기 위해 DB 차원의 파티셔닝, 클러스터링을 이용하게 된다.

### 1) DB Partioning 장점

* 고가용성(Transactional) : 한 파티션에서 장애가 발생해도 서비스가 중단되지 않는다.
* 병렬처리(Analytic) : 파티션 간 병렬처리는 데이터 검색, 처리 성능을 높인다.
* 성능향상(Onine) : 선형적으로 성능이 증가한다.

### 2) 공유 디스크 vs 무공유

* 공유디스크 : 높은 고장 감내성(fault tolerance), but 클러스터 커지면 디스크에서 병목 현상
  * Oracle RAC
* 무공유 : 별도의 고장 감내성을 구성해야 한다. 로컬 디스크에 각자 저장, 노드 간 공유하지 않는다.
  * 나머지는 대부분 **무공유 방식**



### 3) Oracle RAC DB Server

RAC(Real Application Cluster)

* 애플리케이션 파티션, 데이터 파티션이 동시에 구현되어야 한다.
* 데이터 파티션 목적: 데이터 접근(access)의 중복을 피한다.



### 4) IBM DB2 ICE

ICE(Integrated Cluster Enviornment)

* 무공유 방식 : CPU, 메모리, 디스크를 파티션별로 독립적으로 운영한다.
* 각 노드로 파티셔닝 할 경우 Failover가 필요한 가용성이 보장되어야 한다.



### 5) MS SQL Server

* 무공유 방식
* Active-Standby



### 6) MySQL

* 무공유 구조, 메모리 기반 데이터베이스 클러스터링 지원한다. 병렬 서버 구조로 확장이 가능하다.
* 관리노드(Management Node) : 클러스터를 관리하는 노드, 클러스터 시작, 재구성
* 데이터노드(NDB Node) : 클러스터의 데이터 저장
* MySQL 노드: 클러스터 데이터 접근 지원

* 1) 고가용성 무정지 시스템과 자동적 페일오버 기능
* 2) 하드디스크 기반 고성능 데이터베이스 구현

제한사항

* 클러스터에서 생성가능한 테이블 수 최대 2만 320개이다.
* 테이블의 key는 32개가 최대이다.
* 운영 중 노드를 추가, 삭제 할 수 없다.



---

## 3. NoSQL

RDBMS, SQL을 사용하지 않는 데이터 베이스 시스템 또는 저장소이다. (No SQL, or Not Only SQL) 단순히 key, value 형태로 저장하고 빠르게 조회하는 자료구조 를 가진다. 

따라서 복잡한 연산 기능, 데이터 무결성을 제공하진 않지만, 대용량 데이터와 대규모 확장성을 제공한다.



### 1) 구글의 빅테이블

* 구글의 AppEngine 의 데이터 저장소 Bigtable 
* 데이터 클러스터 보았을 때 공유디스크 방식이다.
* 빅테이블의 SPOF(Single Point Of Failure)는 마스터이다.

> SPOF : 동작하지 않으면 전체 시스템이 중단되는 시스템 구성요소



### 2) 아마존 SimpleDB

### 3) MS SSDS

SQL Server Data Service