# MSA 005 - 마이크로서비스 설계

소프트웨어 개발에서 모듈화는 중요

- high cohesion
- low coupling

DDD 중심 마이크로서비스 도출, 설계

# 마이크로서비스 도출

## 비즈니스 능력

- 비즈니스 능력(비즈니스 가치를 생산하기 위해 하는 일, 조직이 하는 일)에 따라 서비스로 식별
- 업무 기능 분해
- 대, 중, 소 

## DDD 바운디드 컨텍스트

# DDD 전략적 설계

## 도메인과 서브도메인

- 서브도메인
  - 핵심 서브도메인
  - 지원 서브도메인
  - 일반 서브도메인

## 유비쿼터스 언어, 도메인모델, 바운디드 컨텍스트

유비쿼터스 언어

- 도메인 내에서 공통으로 사용하는 언어
- ‘고객’ 이라도 부서 별로 의미 달라질 수 있어 용어 정리 필요
  - 결제도메인에서는 결제자
  - 배송도메인에서는 수취자

바운디드 컨텍스트

- 도메인 간 경계

## 컨텍스트 매핑

- 컨텍스트 간 의존관계 매핑
- 공유 커널

### 주요 컨텍스트 매핑 관계

- 공급자와 소비자 (Upstream, Downstream)
- 준수자 (Confirmist)
- 총돌 방지 계층 (ACL; Anti-Corruption Layer)
  - 상류팀 모델에 하류팀이 영향을 받을 떄, 하류 팀 고유 모델 지키기 위한 번역 계층
  - 레거시 시스템과 새로운 시스템을 통합하기 위해 주로 사용
- 공개 호스트 서비스(OHS; Open Host Service)
  - 바운디드 컨텍스트에 대한 접근을 제공하는 프로토콜이나 인터페이스 정의
- 발행된 언어(PL; Published Language)
  - 하류 컨텍스트가 상류 컨텍스트가 제공하는 기능을 사용하게 하기 위한 간단한 사용과 번역을 가능케하는 문서화된 정보 교환 언어
  - XML, JSON

### 컨텍스트 맵

![](https://i.ibb.co/v4hrmF6/image.png)

<br />

# 이벤트 스토밍

- 이벤트 스토밍 워크숍
  - 도메인 이벤트 찾기
  - 외부 시스템 도출
  - 커맨드 도출
  - 핫스팟 도출
    - 가정, 경고, 질문, 미결정 사항 등 작성해서 문제가 되는 위치에 붙임
  - 액터 도출
  - 애그리거트 정의
  - 바운디드 컨텍스트 그리기
  - 정책 도출하면서 연관관계 생각하기
  - 컨텍스트 매핑

# 마이크로서비스 상세설계

## 1 프론트엔드 모델링

## 2 백엔드 모델링

### API 설계

# 도메인 모델링

