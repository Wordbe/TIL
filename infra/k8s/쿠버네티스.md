# 쿠버네티스



# 컨테이너 오케스트레이션

- 서버를 잘 관리하는 법

  - 문서화 - 그대로 해도 잘 안됨
  - 코드로 설정 (CHEF, Ansible, Puppet) - 설치된 것과 충돌나는 경우 많음, 러닝커브
  - 가상머신 - 느리다. 다른 클라우드, 특정 벤더에 맞지 않을 수 있다.

- 도커의 등장

  - 도커 컨테이너 (어디서든 동작, 사용 방법 쉽다)

    - 가상머신과 비교하여 컨테이너 생성이 쉽고 효율적(메모리 효율적으로 사용)
    - 컨테이너 이미지를 이용한 배포와 롤백이 간단
    - 언어나 프레임워크에 상관없이 애플리케이션을 동일한 방식으로 관리한다.
    - 개발, 테스팅, 운영 환경은 물론 로컬 피시와 클라우드까지 동일한 환경을 구축할 수 있다.
    - 특정 클라우드 벤더에 종속적이지 않다.

    ![](https://i.ibb.co/dbQ9vpp/2022-01-12-10-33-47.png)

    - 코드작성 → 빌드(이미지 생성) → Ship(도커 허브나 저장소에 저장) → Run(컨테이너 실행)

  - 수백~수천개의 컨테이너를 실행하려면 불편

- 도커 그 이후

  - 일일이 ssh 접속하여 실행
  - 쉬고 있는 서버를 효율적으로 사용해야 한다.
  - 롤아웃/롤백 손이 많이 간다.
  - 프록시 → 로드밸런서 → WEB1, WEB2 (마이크로서비스 ㅂㄷㅂㄷ)
  - 서비스 이상, 부하 모니터링을 어떻게 할 것인가?
    - 일일이 로그 확인, 새벽 시간에 서버 증설...

- 컨테이너 오케스트레이션 - 복잡한 컨테이너 환경을 효과적으로 관리하기 위한 도구

  - Cluster
    - 중앙제어 (master-node) - 마스터서버를 조작하면, 마스터서버가 나머지 서버를 알아서 관리
    - 노드 스케일
  - State
    - 상태 관리 - replica 등
  - Scheduling
    - 배포 관리 - 공간이 빈 서버에 알아서 새로운 서버 등록
  - Rollout, Rollback
    - 배포 버전 관리
  - Service Discovery
    - 서비스 등록 및 조회
  - Volume
    - 볼륨 스토리지

- 컨테이너 오케스트레이션의 춘추전국 시대 : Docker Swarm 가 편했으나 ... → **Kubernetes**

